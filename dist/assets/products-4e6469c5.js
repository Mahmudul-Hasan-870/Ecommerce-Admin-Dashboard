import{d as u}from"./vendor-513bb039.js";import{a}from"./index-713483bf.js";const l=u("products",{state:()=>({products:[],loading:!1,error:null,pagination:{page:1,limit:10,total:0}}),getters:{totalProducts:t=>t.products.length,activeProducts:t=>t.products.filter(s=>s.status==="active"),lowStockProducts:t=>t.products.filter(s=>s.stock<10)},actions:{async fetchProducts(t={}){var s,e;this.loading=!0,this.error=null;try{const r=await a.get("/products",{params:t});return this.products=r.data.products,this.pagination=r.data.pagination||{page:1,limit:10,total:this.products.length},{success:!0}}catch(r){return this.error=((e=(s=r.response)==null?void 0:s.data)==null?void 0:e.message)||"Failed to fetch products",{success:!1,error:this.error}}finally{this.loading=!1}},async createProduct(t){var s,e;this.loading=!0,this.error=null;try{t.images&&t.images.length>0&&t.images[0]instanceof File&&(t.images=t.images.map((o,i)=>`https://via.placeholder.com/400x400?text=Image+${i+1}`));const r=await a.post("/products",t);return this.products.unshift(r.data),{success:!0,product:r.data}}catch(r){return this.error=((e=(s=r.response)==null?void 0:s.data)==null?void 0:e.message)||"Failed to create product",{success:!1,error:this.error}}finally{this.loading=!1}},async updateProduct(t,s){var e,r;this.loading=!0,this.error=null;try{const o=await a.put(`/products/${t}`,s),i=this.products.findIndex(c=>c._id===t);return i!==-1&&(this.products[i]=o.data),{success:!0,product:o.data}}catch(o){return this.error=((r=(e=o.response)==null?void 0:e.data)==null?void 0:r.message)||"Failed to update product",{success:!1,error:this.error}}finally{this.loading=!1}},async deleteProduct(t){var s,e;this.loading=!0,this.error=null;try{return await a.delete(`/products/${t}`),this.products=this.products.filter(r=>r._id!==t),{success:!0}}catch(r){return this.error=((e=(s=r.response)==null?void 0:s.data)==null?void 0:e.message)||"Failed to delete product",{success:!1,error:this.error}}finally{this.loading=!1}},async getProduct(t){var s,e;try{return{success:!0,product:(await a.get(`/products/${t}`)).data}}catch(r){return this.error=((e=(s=r.response)==null?void 0:s.data)==null?void 0:e.message)||"Failed to fetch product",{success:!1,error:this.error}}}}});export{l as u};
