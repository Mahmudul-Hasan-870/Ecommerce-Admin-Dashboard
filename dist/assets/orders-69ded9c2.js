import{d as l}from"./vendor-513bb039.js";import{a as o}from"./index-713483bf.js";const g=l("orders",{state:()=>({orders:[],loading:!1,error:null,pagination:{page:1,limit:10,total:0}}),getters:{totalOrders:e=>e.orders.length,pendingOrders:e=>e.orders.filter(r=>r.status==="pending"),deliveredOrders:e=>e.orders.filter(r=>r.status==="delivered"),totalRevenue:e=>e.orders.filter(r=>r.status==="delivered").reduce((r,s)=>r+s.total,0)},actions:{async fetchOrders(e={}){var r,s;this.loading=!0,this.error=null;try{const t=await o.get("/orders",{params:e});return this.orders=t.data.orders,this.pagination=t.data.pagination,{success:!0}}catch(t){return this.error=((s=(r=t.response)==null?void 0:r.data)==null?void 0:s.message)||"Failed to fetch orders",{success:!1,error:this.error}}finally{this.loading=!1}},async updateOrderStatus(e,r,s){var t,i;this.loading=!0,this.error=null;try{let a=`/orders/${e}`,d={[r]:s};r==="status"?(a=`/orders/${e}/status`,d={status:s}):r==="paymentStatus"&&(a=`/orders/${e}/paymentStatus`,d={paymentStatus:s});const n=await o.put(a,d),c=this.orders.findIndex(u=>u._id===e);return c!==-1&&(this.orders[c]=n.data),{success:!0,order:n.data,message:n.data.message}}catch(a){return this.error=((i=(t=a.response)==null?void 0:t.data)==null?void 0:i.message)||`Failed to update order ${r}`,{success:!1,error:this.error}}finally{this.loading=!1}},async getOrder(e){var r,s;try{return{success:!0,order:(await o.get(`/orders/${e}`)).data}}catch(t){return this.error=((s=(r=t.response)==null?void 0:r.data)==null?void 0:s.message)||"Failed to fetch order",{success:!1,error:this.error}}},async getOrderStats(){var e,r;try{return{success:!0,stats:(await o.get("/orders/stats/overview")).data}}catch(s){return this.error=((r=(e=s.response)==null?void 0:e.data)==null?void 0:r.message)||"Failed to fetch order stats",{success:!1,error:this.error}}}}});export{g as u};
